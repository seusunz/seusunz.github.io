<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf8" />
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <title>
      
        深度解析H.266/VVC环路滤波 | 九天之遥
      
    </title>
    <meta name="description" content="书到用时方恨少，事非经过不知难" />
    <meta name="keywords" content="" />
    
      <link rel="apple-touch-icon"
            sizes="180x180"
            href="/images/apple-touch-icon.png" />
    
    
      <link rel="icon"
            type="image/png"
            sizes="32x32"
            href="/images/favicon-32x32.png" />
    
    
      <link rel="icon"
            type="image/png"
            sizes="16x16"
            href="/images/favicon-16x16.png" />
    
    
      <link rel="mask-icon"
            href="/images/logo.svg"
            color="" />
    
    
    
      
  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/normal.ttf);
        font-weight: normal;
    }
  </style>

  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/bold.ttf);
        font-weight: bold;
    }
  </style>


    
    <link rel="stylesheet"
          type="text/css"
          href='/css/layout.css' />
    
    
  <link rel="stylesheet" type="text/css" href="/css/post.css"/>
  

  <meta name="generator" content="Hexo 7.3.0"></head>
  <body>
    
      <div id="search-mask" style="display:none">
  <div class="search-main" id="search-main">
    <div class="search__head">
      <div class="search-form">
        <svg t="1706347533072"
             class="icon"
             viewBox="0 0 1024 1024"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="7828"
             width="20"
             height="20">
          <path d="M685.6 660.336l155.152 155.168a16 16 0 0 1 0 22.624l-11.312 11.328a16 16 0 0 1-22.624 0l-158.528-158.544a289.792 289.792 0 0 1-165.152 51.36C322.336 742.256 192 611.904 192 451.12 192 290.336 322.336 160 483.136 160c160.784 0 291.12 130.336 291.12 291.136 0 82.112-33.984 156.272-88.672 209.2z m-202.464 33.92c134.272 0 243.12-108.848 243.12-243.12C726.256 316.848 617.408 208 483.136 208 348.848 208 240 316.848 240 451.136c0 134.272 108.848 243.12 243.136 243.12z" fill="#000000" p-id="7829">
          </path>
        </svg>
        <input id="search-input" placeholder="搜索文章">
        <svg t="1706361500528"
             id="search-clear"
             class="icon"
             viewBox="0 0 1024 1024"
             version="1.1"
             xmlns="http://www.w3.org/2000/svg"
             p-id="4351"
             width="20"
             height="20">
          <path d="M512 562.688l-264.2944 264.2944-50.688-50.688L461.312 512 197.0176 247.7056l50.688-50.688L512 461.312l264.2944-264.2944 50.688 50.688L562.688 512l264.2944 264.2944-50.688 50.688L512 562.688z" fill="#00" p-id="4352">
          </path>
        </svg>
      </div>
    </div>
    <div class="search__body" id="search-result"></div>
    <div class="search__foot"></div>
  </div>
</div>

    
    <div class="head">
      <div class="nav">
        <a href='/' class="nav-logo">
          <img alt="logo" height="60px" width="60px" src="/images/logo.svg" />
        </a>
        <input id="navBtn" type="checkbox" />
        <div class="nav-right">
          
            <div class="search-outer">
  <div class="search" id="search-btn">
    <svg t="1706347533072"
         class="icon"
         viewBox="0 0 1024 1024"
         version="1.1"
         xmlns="http://www.w3.org/2000/svg"
         p-id="7828"
         width="20"
         height="20">
      <path d="M685.6 660.336l155.152 155.168a16 16 0 0 1 0 22.624l-11.312 11.328a16 16 0 0 1-22.624 0l-158.528-158.544a289.792 289.792 0 0 1-165.152 51.36C322.336 742.256 192 611.904 192 451.12 192 290.336 322.336 160 483.136 160c160.784 0 291.12 130.336 291.12 291.136 0 82.112-33.984 156.272-88.672 209.2z m-202.464 33.92c134.272 0 243.12-108.848 243.12-243.12C726.256 316.848 617.408 208 483.136 208 348.848 208 240 316.848 240 451.136c0 134.272 108.848 243.12 243.136 243.12z" fill="#000000" p-id="7829">
      </path>
    </svg>
    <span>搜索</span>
    <span class="search-shortcut-key">Ctrl K</span>
  </div>
</div>

          
          <div class="nav-menu">
            
              
                <a class="nav-menu-item" href="/code">技术笔记</a>
              
                <a class="nav-menu-item" href="/pro">项目开发</a>
              
                <a class="nav-menu-item" href="/life">生活</a>
              
            
            <a class="nav-menu-item" href='/cv/'>简历</a>
          </div>
        </div>
        <label class="nav-btn" for="navBtn"></label>
      </div>
    </div>
    <div class="body">
      
  <article class="post-content">
    <div class="post-inner">
      <div class="post-content__head">
        <div class="post-title">深度解析H.266/VVC环路滤波</div>
        <div class="post-info">
          
  <a href="/tags/vvc/" class="post-tag">#vvc</a>


          <span class="post-date">2024-07-29</span>
        </div>
      </div>
      
      <div class="post-content__body">
        
          <div class="post-gallery">
            
          </div>
        
        <h1 id="一、环路滤波基础"><a href="#一、环路滤波基础" class="headerlink" title="一、环路滤波基础"></a>一、环路滤波基础</h1><p>定义：在视频编码过程中进行滤波，滤波后的图像用于后续编码。<br>目的：</p>
<ul>
<li>提升编码图像的质量。</li>
<li>为后续编码图像提供高质量参考，获得更好的预测效果。</li>
</ul>
<p>VVC中主要采取的技术有：</p>
<ul>
<li>色度与亮度缩放（Luma Mapping Chroma Scaling, LMCS）、</li>
<li>去方块滤波（De-Blocking Filter, DBF）、</li>
<li>样点自适应补偿（Sample Adaptive Offset, SAO）、</li>
<li>自适应滤波（Adaptive Loop Filter, ALF）。</li>
</ul>
<p>DBF用于降低方块效应、SAO用于改善振铃效应、ALF可以减少解码误差。<br>在编码环路中，一般是先去方块滤波、样点自适应补偿和自适应环路滤波的顺序。LMCS一般对编码前的图像进行预处理。</p>
<h1 id="二、环路滤波方法"><a href="#二、环路滤波方法" class="headerlink" title="二、环路滤波方法"></a>二、环路滤波方法</h1><h2 id="2-1-色度与亮度缩放（LMCS）"><a href="#2-1-色度与亮度缩放（LMCS）" class="headerlink" title="2.1 色度与亮度缩放（LMCS）"></a>2.1 色度与亮度缩放（LMCS）</h2><h3 id="2-2-1-背景"><a href="#2-2-1-背景" class="headerlink" title="2.2.1 背景"></a>2.2.1 背景</h3><p>包括两个部分：</p>
<ul>
<li>基于自适应分段线性模型的亮度映射；应用在像素级，利用亮度值范围及广电转换特性来提高视频的编码效率。</li>
<li>基于亮度的色度残差缩放：应用在色度块级，通过补偿亮度信号映射对色度信号的影响。</li>
</ul>
<p>解码端LMCS框架结构如下图所示：<br><img src="/images/codec/micro.jpg" alt="在这里插入图片描述"></p>
<h3 id="2-2-2-VVC-中的亮度-色度缩放"><a href="#2-2-2-VVC-中的亮度-色度缩放" class="headerlink" title="2.2.2 VVC 中的亮度&#x2F;色度缩放"></a>2.2.2 VVC 中的亮度&#x2F;色度缩放</h3><p><strong>基本思想</strong><br>        在指定的位深下更好地使用允许的亮度值范围。10bit视频亮度值范围为[64,940]。在编解码过程中，前向映射将范围[64,940]映射到[0,1023]中，再进行变换、量化等模块的处理。或者一个亮度范围较小的视频，没有充分利用允许的亮度值，因此LMCS就是将原始域亮度值映射到允许的亮度值范围。</p>
<p><strong>基于分段线性模型的亮度映射</strong><br>        VVC中，前向映射函数FwdMap使用一个分段线性模型，反向映射函数InvMap为逆函数。<br>        根据视频的位深将原始域的码值范围划分为16个相等的片段，每个片段的码字数量由OrgCW表示，<br>        变量InputPivot[i]表示原始域内各片段的边界点。<br>        有InputPivot[i] &#x3D; i * OrgCW;<br>        映射域内各片段的边界点表示MappedPivot[i]，<br>        MappedPivot[i+1]-MappedPivot[i]的值就是映射域中第i个片段的亮度值个数，表示为SignalledCW[i]。</p>
<p><strong>色度缩放</strong><br>        前向缩放将原始域色度值转换到映射域，有色度缩放以TU为单位，同一个TU使用相同的缩放因子，也使用分段线性模型，同一个片段色度缩放因子相同。色度缩放偏移量deltaCRS由自适应参数集LMCS_APS标识。<br><img src="https://i-blog.csdnimg.cn/direct/a7239aebc9f040cc8d5f1927014b3391.png" alt="在这里插入图片描述"></p>
<p><strong>LMCS的实现</strong><br>        介绍的是VTM中使用的LMCS模型参数的构建方法，对于SDR\HDR-PQ\HDR-HLG视频的特性不同，模型参数不同。对于SDR和HDR-HLG视频，基于局部亮度方差，针对PSNR指标进行优化。对于HDR-PQ视频，针对加权PSNR进行优化，基本思想为空间平滑区域分配相比复杂区域更多的码字。</p>
<p><strong>SDR\HDR-HLG视频</strong><br>1、统计分析视频内容，在原始域划分片段，分配初始码字<br>2、根据图像内容调整片段的码字数量<br>3、如果分配的码字总数大于允许的最大码字数，从第一个片段开始，每个片段减少相同的数量，知道妈祖条件，得到最终每个片段分配的码字数量SignalledCW[i].<br>4、根据亮度样本映射前后的相对值及平均局部方差，确定LMCS片类型、高码率自适应和色度调整自适应参数。</p>
<p><strong>HDR-PQ视频</strong><br>1、计算映射模型曲线的斜率<br>2、积分映射模型曲线的斜率<br>3、归一化<br>4、计算每个片段的码字数量。</p>
<p><strong>LMCS的相关语法元素</strong><br><strong>SPS层</strong></p>
<table>
<thead>
<tr>
<th align="center">变量名</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">sps_lmcs_enabled_flag</td>
<td align="center">为1的时候标识使用LMCS</td>
</tr>
</tbody></table>
<p><strong>PH层</strong></p>
<table>
<thead>
<tr>
<th align="center">变量名</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ph_lmcs_enabled_flag</td>
<td align="center">当前图像是否使用LMCS</td>
</tr>
<tr>
<td align="center">ph_lmcs_aps_id</td>
<td align="center">当前按图片中的slice所应用的LMCS APS的aps_adaptation_parameter_set_id</td>
</tr>
<tr>
<td align="center">ph_chroma_residual_scale_flag</td>
<td align="center">当前图片是否使用色度残差缩放</td>
</tr>
</tbody></table>
<p><strong>SH层</strong></p>
<table>
<thead>
<tr>
<th align="center">变量名</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">sh_lmcs_used_flag</td>
<td align="center">当前slice是否使用LMCS</td>
</tr>
</tbody></table>
<p><strong>APS层</strong></p>
<table>
<thead>
<tr>
<th align="center">变量名</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">lmcs_min_bin_idx</td>
<td align="center">LMCS过程中使用的最小bin索引</td>
</tr>
<tr>
<td align="center">lmcs_delta_max_bin_idx</td>
<td align="center">最大bin索引与15之间的差值</td>
</tr>
<tr>
<td align="center">lmcs_delta_cw_prec_minus1</td>
<td align="center">加1用于kmcs_delta_abs_cw[i]的比特数</td>
</tr>
<tr>
<td align="center">lmcs_delta_abs_cw[i]</td>
<td align="center">第i个区间的码字绝对增量值</td>
</tr>
<tr>
<td align="center">lmcs_delta_sign_cw_flag[i]</td>
<td align="center">标识变量LmcsDeltaCW[i]的符号</td>
</tr>
<tr>
<td align="center">lmcs_delta_abs_crs</td>
<td align="center">表示变量LmcsDeltaCrs的绝对码字值</td>
</tr>
<tr>
<td align="center">lmcs_delta_sign_crs_flag</td>
<td align="center">表示变量LmcsDeltaCrs的符号</td>
</tr>
</tbody></table>
<h2 id="2-2-去方块滤波（DBF）—减轻块效应"><a href="#2-2-去方块滤波（DBF）—减轻块效应" class="headerlink" title="2.2 去方块滤波（DBF）—减轻块效应"></a>2.2 去方块滤波（DBF）—减轻块效应</h2><h3 id="2-2-1-背景-1"><a href="#2-2-1-背景-1" class="headerlink" title="2.2.1 背景"></a>2.2.1 背景</h3><p>目前主流的视频编码标准都是基于分块的混合编码机制，其处理过程是针对每个块单独进行处理的，因此由于编码模式的差异以及量化误差的原因，会导致相邻块重建像素不连续的现象。对于一个两侧强相关性的块边界，当图像较平滑时，就会在重建图像中出现方块效应，如下图所示。<br><img src="https://i-blog.csdnimg.cn/direct/3c59fe17522549ae86842a1153508ab6.png" alt="在这里插入图片描述"><br>方块效应产生的原因主要包括以下两个方面：</p>
<ol>
<li>由变换、量化的误差引起的。在视频编码中，量化是一个有损压缩过程，因此在反量化、反变换之后的重建图像会出现误差，由于不同块之间的处理不一致，而且边界处的误差格外大一些，会造成图像在边界上的视觉不连续。</li>
<li>来自帧间的运动补偿过程。对于相邻块，其运动补偿的预测数据可能来自同一帧的不同位置、不同帧不同的位置，因此会产生误差，引起图像在复制的边界上的不连续现象。</li>
</ol>
<p>为了消除或者减轻块效应，通常使用去块滤波（DBF）修正图像边界处的像素值。</p>
<h3 id="2-2-2-VVC-中的去块滤波"><a href="#2-2-2-VVC-中的去块滤波" class="headerlink" title="2.2.2 VVC 中的去块滤波"></a>2.2.2 VVC 中的去块滤波</h3><p>VVC中与HEVC的去块滤波过程类似。在VVC中，对CU边界、变换子块边界和预测子块边界进行去块滤波处理。预测子块边界包括由SbTMVP和仿射模式引入的预测单元PU边界，变换子块边界包括由SBT和ISP模式引入的变换单元边界，以及由于大CUs的隐式划分而引起的变换。对CU边界和变换子块边界采用4x4滤波处理网格，对预测子块边界采用8x8滤波处理网格。对于SBT和ISP子块，类似于HEVC去块滤波器中TU的逻辑，当任一变换子块的边缘有非零系数时，在TU边界上应用去块滤波器。对于SbTMVP和仿射预测子块，类似于HEVC中PU中的逻辑，在8x8网格上应用去块滤波器，同时考虑相邻预测子块的运动矢量和参考图片之间的差异。变换块边界最多可以用变换边界一侧的5个样本去块，变换边界也是编码块的一部分，其中SbTMVP或affine用于实现并行友好去块。内部预测子块边界来自变换块边界的4个样本在每侧最多滤波1个样本，内部预测子块边界远离变换块边界的8个样本在边界的每侧最多滤波2个样本，并且其他内部预测子块边界在边界的每侧最多滤波3个样本。</p>
<p>针对亮度滤波，VVC对“大块”引入了双线性滤波器（更强滤波），“大块”即边界长度大于等于32的块。亮度分量的滤波器分类如下：</p>
<ul>
<li>更强滤波，最多可达每侧边界的7个像素</li>
<li>强滤波，对边界像素每边修改3个像素</li>
<li>弱滤波，最多对边界两边修改2个像素</li>
</ul>
<p>由于VVC的二叉树、三叉树划分引入矩形块，所以VVC中亮度使用4x4大小的滤波处理单元。</p>
<p>针对色度滤波，主要分为以下两种滤波器：</p>
<ul>
<li>强滤波，对边界每边修改3个像素</li>
<li>弱滤波，对边界每侧修改1个像素</li>
<li>色度滤波仅使用8x8的滤波处理单元。</li>
</ul>
<p>以8x8滤波处理单元为例，每个处理块横跨4个8x8的呈“+”字形的边界， 如下图所示，<br>边界两侧块分别用P（垂直边界左侧块或者水平边界上侧块）和Q（垂直边界右侧块和水平边界下侧块）表示。<br>对于需要滤波的边界，按照先亮度分量后色度分量的顺序；<br>对于同一分量的块，按照先垂直边界后水平边界的顺序。</p>
<p><img src="https://i-blog.csdnimg.cn/direct/6d887da96c374a6185c1b06bdbc9385a.png" alt="在这里插入图片描述"></p>
<p>VVC的去块滤波过程和HEVC的类似，主要包含三个步骤</p>
<ul>
<li>根据边界两侧的编码模式和编码参数确定边界强度</li>
<li>根据边界两侧像素值，确定滤波强度（包括滤波开关决策和滤波强度决策）</li>
<li>进行滤波处理过程</li>
</ul>
<h2 id="2-3-样点自适应补偿（SAO）—改善振铃效应"><a href="#2-3-样点自适应补偿（SAO）—改善振铃效应" class="headerlink" title="2.3 样点自适应补偿（SAO）—改善振铃效应"></a>2.3 样点自适应补偿（SAO）—改善振铃效应</h2><h3 id="2-3-1-背景"><a href="#2-3-1-背景" class="headerlink" title="2.3.1 背景"></a>2.3.1 背景</h3><h3 id="2-3-2-VVC-中的样点自适应补偿"><a href="#2-3-2-VVC-中的样点自适应补偿" class="headerlink" title="2.3.2 VVC 中的样点自适应补偿"></a>2.3.2 VVC 中的样点自适应补偿</h3><h2 id="2-4-自适应滤波（ALF）—减少解码误差"><a href="#2-4-自适应滤波（ALF）—减少解码误差" class="headerlink" title="2.4 自适应滤波（ALF）—减少解码误差"></a>2.4 自适应滤波（ALF）—减少解码误差</h2><h3 id="2-4-1-背景"><a href="#2-4-1-背景" class="headerlink" title="2.4.1 背景"></a>2.4.1 背景</h3><p>自适应环路滤波（ALF）并不是在 H.266&#x2F;VVC 标准制定过程中才被提出来的技术，实际上其早在 H.265&#x2F;HEVC 标准制定时就基本确定了现有形式的雏形，只是由于当时硬件算力的限制未能加入到 HEVC 标准中。详细可阅读以下的论文。随着硬件算力的提升与一些优化方法的提出，以及人们对更高效率的编解码算法的期望，ALF 自然就成了 VVC 标准中不可或缺的部分。由于 ALF 是一个十分有效的手段，也就吸引力不少人去研究，很多率失真改进方法不断被提出，所以基本每一次会议之后都能看到一些不同的地方。这里我主要就其滤波的原理进行介绍，可以让大家能够更好地理解 VTM 代码里的相关实现。</p>
<p>ALF 模块处于去块效应滤波（Deblocking Filtering, DF）和样点自适应补偿（Sample Adaptive Offset, SAO）之后。相比于 DF 和 SAO，ALF 更加贴近于我们对图像滤波的一般理解，也就是说其可以表示为图像与卷积核之间的卷积运算。而至于所使用卷积核，当然不是什么高斯模糊、边缘检测之类的，视频编解码算法里降低码率和误差才是王道。靠滤波来直接降低码率自然是不行的，那是熵编码干的活，那什么滤波可以降低误差呢？没错，就是维纳滤波（Wiener Filtering, WF）。</p>
<p>维纳滤波是一种基于最小均方误差准则、对平稳过程的最优估计器，其输出与期望输出之间的均方误差为最小。然而，要注意的是，维纳滤波并不是一种现成的滤波器，其只是确立了一种准则，具体还是要自己设计的，在信号与系统里也就是找到相应的系统冲激响应，在离散图像里也就是要找到相应的卷积核。因此，下面的内容将就该卷积核的求导进行详细的介绍。</p>
<h3 id="2-4-2-VVC-中的自适应滤波-alf"><a href="#2-4-2-VVC-中的自适应滤波-alf" class="headerlink" title="2.4.2 VVC 中的自适应滤波 alf"></a>2.4.2 VVC 中的自适应滤波 alf</h3><p><strong>1. 滤波器的形状</strong><br>虽然维纳滤波并没有限制所用的滤波器形式，但我们还是要综合考虑其实现的难度以及所能带来的增益。在图像处理中，最方便、直观的滤波方式就是采用一个矩形的卷积核，ALF 也遵循这种习惯。不过，很显然，卷积核的尺寸越大，所获得的增益一般来说会越大，但其所带来的计算复杂度也就越高，而且这种增益和复杂度之间的关系并不是线性的。</p>
<p>另外，维纳滤波是和原始数据相关的，而解码端是不可能接触到原始数据的，那就意味着我们必须要把解码端所求得的滤波系数编到码流中进行传输，所以我们也不能把卷积核弄得太大。</p>
<p>考虑以上因素，VVC  定义了两种形状的滤波器，其中对亮度分量使用 7x7 的滤波器，而对色度分量采用 5x5 的滤波器。</p>
<p>为了减少传输滤波器系数的码字以及降低滤波的计算复杂度，ALF 使用了菱形且中心对称的滤波系数矩阵，其形状如图 1 所示，也就是只有菱形内的像素会参与滤波，而中心对称的像素使用相同的滤波系数，其中滤波器中心的位置即是当前滤波的像素位置。</p>
<p>对于亮度分量，VVC定义了最多 25 组滤波系数，像素所属分组基于重建后的图像以 4x4 小块为单位，根据该块以及周围像素的梯度信息进行推导，该块内所有像素均属于同一组。</p>
<p>对于色度分量，Cb，Cr 各自只定义一组系数。</p>
<p>三个分量独立进行率失真优化与系数推导以及最终的滤波。具体亮度分量像素的分类在标准文档中有详细介绍，这里不多说。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">AlfFilterType</span><br>&#123;<br>  ALF_FILTER_5,<br>  ALF_FILTER_7,<br>  ALF_NUM_OF_FILTER_TYPES<br>&#125;;<br></code></pre></td></tr></table></figure>



<p><img src="https://i-blog.csdnimg.cn/direct/64c46451e9b6487aaee98202746a806e.png" alt="ALF filter shapes"></p>
<p><strong>2. 维纳滤波</strong></p>
<p><img src="https://i-blog.csdnimg.cn/direct/cf0b25857d0c41c2a65bc085143cea51.png" alt="在这里插入图片描述"><br>将上式写成矩阵形式，可得<br><img src="https://i-blog.csdnimg.cn/direct/468171e9cd9c499cb541ef33ac0a8e05.png" alt="在这里插入图片描述"><br>为了方便，我们令<br><img src="https://i-blog.csdnimg.cn/direct/e1701a0162ac4b83b2baf82448f5789d.png" alt="在这里插入图片描述"><br>那么上面的线性方程组可写为<br><img src="https://i-blog.csdnimg.cn/direct/2baf26840eb64dcd9aace4179cab9eb5.png" alt="在这里插入图片描述"><br>其中<br><img src="https://i-blog.csdnimg.cn/direct/5f30a6d1fc5c4f469a3cebfe6d714aba.png" alt="在这里插入图片描述"></p>
<h3 id="3-块分类"><a href="#3-块分类" class="headerlink" title="3. 块分类"></a>3. 块分类</h3><p><strong>注意</strong>：对不同的小块使用不同的滤波器，因此需将这些小块进行分类，以区分出小块要使用的滤波器是哪一种。</p>
<p>对于亮度分量需要为每个4x4的子块分类，共25个类别C。类别C是由4x4块的方向D和活动性A决定：<br>                                                                    C &#x3D; 5D + A<br>其中D和A分别表示当前块的Direction和Activity；</p>
<p>计算之前需要先用1-D拉普拉斯算子计算当前块的水平、垂直和两个对角方向的gradient。为了计算D和A，需要计算子块的水平、垂直、两个对角线方向的梯度。梯度计算使用一维拉普拉斯方法实现：<br><img src="https://i-blog.csdnimg.cn/direct/ef65add47c934cd9a646d00c299c4b29.png" alt="在这里插入图片描述"></p>
<p>为了减少计算复杂度，在计算梯度前，进行一维拉普拉斯计算下采样，如下图：<br><img src="https://i-blog.csdnimg.cn/direct/0c1eba37c2dd47b99dd9824d2f4ed3f8.png" alt="在这里插入图片描述"><br><img src="https://i-blog.csdnimg.cn/direct/5e8b63e653594dbba15ee28b748ba10f.png" alt="在这里插入图片描述"><br>因此，计算4x4块类别C的步骤为：</p>
<ol>
<li>首先进行图像下采样，计算水平gh和垂直gv方向的梯度；</li>
<li>其次，根据gh和gv计算gmax(h,v)和gmin(h,v),得到D和A：</li>
<li>然后将D和A代入类别C&#x3D;5D + A计算公式,计算出亮度4x4块的类别C, 从而选定4x4小块的滤波器参数类别组</li>
<li>对于色度分量不需要对其子块进行分类操作，它只有一个滤波器。</li>
</ol>
<h3 id="4-滤波器系数和门限值几何变换"><a href="#4-滤波器系数和门限值几何变换" class="headerlink" title="4. 滤波器系数和门限值几何变换"></a>4. 滤波器系数和门限值几何变换</h3><p>由上一步可以得到滤波器，但是在滤波操作前需要对滤波器系数和相应门限值进行几何变换，包括旋转、对角和垂直翻转。</p>
<p>变换类型由上面计算的块的梯度决定。</p>
<p>对滤波器进行几何变换效果等价于对滤波区域进行相应几何变换，这么做的目的是使不同块方向对齐。<br><img src="https://i-blog.csdnimg.cn/direct/d628ce65bb6d40588305e93ff7410ee1.png" alt="在这里插入图片描述"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs c++">  <span class="hljs-keyword">if</span>( filtType == ALF_FILTER_7 )<br>      &#123;<br>        <span class="hljs-keyword">if</span>( transposeIdx == <span class="hljs-number">1</span> )<br>        &#123;<span class="hljs-comment">//!&lt;对角线变换</span><br>          filterCoeff = &#123; coef[<span class="hljs-number">9</span>], coef[<span class="hljs-number">4</span>], coef[<span class="hljs-number">10</span>], coef[<span class="hljs-number">8</span>], coef[<span class="hljs-number">1</span>], coef[<span class="hljs-number">5</span>], coef[<span class="hljs-number">11</span>], coef[<span class="hljs-number">7</span>], coef[<span class="hljs-number">3</span>], coef[<span class="hljs-number">0</span>], coef[<span class="hljs-number">2</span>], coef[<span class="hljs-number">6</span>], coef[<span class="hljs-number">12</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">if</span> JVET_N0242_NON_LINEAR_ALF</span><br>          filterClipp = &#123; clip[<span class="hljs-number">9</span>], clip[<span class="hljs-number">4</span>], clip[<span class="hljs-number">10</span>], clip[<span class="hljs-number">8</span>], clip[<span class="hljs-number">1</span>], clip[<span class="hljs-number">5</span>], clip[<span class="hljs-number">11</span>], clip[<span class="hljs-number">7</span>], clip[<span class="hljs-number">3</span>], clip[<span class="hljs-number">0</span>], clip[<span class="hljs-number">2</span>], clip[<span class="hljs-number">6</span>], clip[<span class="hljs-number">12</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( transposeIdx == <span class="hljs-number">2</span> )<br>        &#123;<span class="hljs-comment">//!&lt;垂直翻转</span><br>          filterCoeff = &#123; coef[<span class="hljs-number">0</span>], coef[<span class="hljs-number">3</span>], coef[<span class="hljs-number">2</span>], coef[<span class="hljs-number">1</span>], coef[<span class="hljs-number">8</span>], coef[<span class="hljs-number">7</span>], coef[<span class="hljs-number">6</span>], coef[<span class="hljs-number">5</span>], coef[<span class="hljs-number">4</span>], coef[<span class="hljs-number">9</span>], coef[<span class="hljs-number">10</span>], coef[<span class="hljs-number">11</span>], coef[<span class="hljs-number">12</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">if</span> JVET_N0242_NON_LINEAR_ALF</span><br>          filterClipp = &#123; clip[<span class="hljs-number">0</span>], clip[<span class="hljs-number">3</span>], clip[<span class="hljs-number">2</span>], clip[<span class="hljs-number">1</span>], clip[<span class="hljs-number">8</span>], clip[<span class="hljs-number">7</span>], clip[<span class="hljs-number">6</span>], clip[<span class="hljs-number">5</span>], clip[<span class="hljs-number">4</span>], clip[<span class="hljs-number">9</span>], clip[<span class="hljs-number">10</span>], clip[<span class="hljs-number">11</span>], clip[<span class="hljs-number">12</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( transposeIdx == <span class="hljs-number">3</span> )<br>        &#123;<span class="hljs-comment">//!&lt;旋转变换</span><br>          filterCoeff = &#123; coef[<span class="hljs-number">9</span>], coef[<span class="hljs-number">8</span>], coef[<span class="hljs-number">10</span>], coef[<span class="hljs-number">4</span>], coef[<span class="hljs-number">3</span>], coef[<span class="hljs-number">7</span>], coef[<span class="hljs-number">11</span>], coef[<span class="hljs-number">5</span>], coef[<span class="hljs-number">1</span>], coef[<span class="hljs-number">0</span>], coef[<span class="hljs-number">2</span>], coef[<span class="hljs-number">6</span>], coef[<span class="hljs-number">12</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">if</span> JVET_N0242_NON_LINEAR_ALF</span><br>          filterClipp = &#123; clip[<span class="hljs-number">9</span>], clip[<span class="hljs-number">8</span>], clip[<span class="hljs-number">10</span>], clip[<span class="hljs-number">4</span>], clip[<span class="hljs-number">3</span>], clip[<span class="hljs-number">7</span>], clip[<span class="hljs-number">11</span>], clip[<span class="hljs-number">5</span>], clip[<span class="hljs-number">1</span>], clip[<span class="hljs-number">0</span>], clip[<span class="hljs-number">2</span>], clip[<span class="hljs-number">6</span>], clip[<span class="hljs-number">12</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<span class="hljs-comment">//!&lt;不变换</span><br>          filterCoeff = &#123; coef[<span class="hljs-number">0</span>], coef[<span class="hljs-number">1</span>], coef[<span class="hljs-number">2</span>], coef[<span class="hljs-number">3</span>], coef[<span class="hljs-number">4</span>], coef[<span class="hljs-number">5</span>], coef[<span class="hljs-number">6</span>], coef[<span class="hljs-number">7</span>], coef[<span class="hljs-number">8</span>], coef[<span class="hljs-number">9</span>], coef[<span class="hljs-number">10</span>], coef[<span class="hljs-number">11</span>], coef[<span class="hljs-number">12</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">if</span> JVET_N0242_NON_LINEAR_ALF</span><br>          filterClipp = &#123; clip[<span class="hljs-number">0</span>], clip[<span class="hljs-number">1</span>], clip[<span class="hljs-number">2</span>], clip[<span class="hljs-number">3</span>], clip[<span class="hljs-number">4</span>], clip[<span class="hljs-number">5</span>], clip[<span class="hljs-number">6</span>], clip[<span class="hljs-number">7</span>], clip[<span class="hljs-number">8</span>], clip[<span class="hljs-number">9</span>], clip[<span class="hljs-number">10</span>], clip[<span class="hljs-number">11</span>], clip[<span class="hljs-number">12</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>        &#125;<br>      &#125;<br>      <span class="hljs-keyword">else</span><br>      &#123;<br>        <span class="hljs-keyword">if</span>( transposeIdx == <span class="hljs-number">1</span> )<br>        &#123;<span class="hljs-comment">//!&lt;对角线变换</span><br>          filterCoeff = &#123; coef[<span class="hljs-number">4</span>], coef[<span class="hljs-number">1</span>], coef[<span class="hljs-number">5</span>], coef[<span class="hljs-number">3</span>], coef[<span class="hljs-number">0</span>], coef[<span class="hljs-number">2</span>], coef[<span class="hljs-number">6</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">if</span> JVET_N0242_NON_LINEAR_ALF</span><br>          filterClipp = &#123; clip[<span class="hljs-number">4</span>], clip[<span class="hljs-number">1</span>], clip[<span class="hljs-number">5</span>], clip[<span class="hljs-number">3</span>], clip[<span class="hljs-number">0</span>], clip[<span class="hljs-number">2</span>], clip[<span class="hljs-number">6</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( transposeIdx == <span class="hljs-number">2</span> )<br>        &#123;<span class="hljs-comment">//!&lt;垂直翻转</span><br>          filterCoeff = &#123; coef[<span class="hljs-number">0</span>], coef[<span class="hljs-number">3</span>], coef[<span class="hljs-number">2</span>], coef[<span class="hljs-number">1</span>], coef[<span class="hljs-number">4</span>], coef[<span class="hljs-number">5</span>], coef[<span class="hljs-number">6</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">if</span> JVET_N0242_NON_LINEAR_ALF</span><br>          filterClipp = &#123; clip[<span class="hljs-number">0</span>], clip[<span class="hljs-number">3</span>], clip[<span class="hljs-number">2</span>], clip[<span class="hljs-number">1</span>], clip[<span class="hljs-number">4</span>], clip[<span class="hljs-number">5</span>], clip[<span class="hljs-number">6</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( transposeIdx == <span class="hljs-number">3</span> )<br>        &#123;<span class="hljs-comment">//!&lt;旋转变换</span><br>          filterCoeff = &#123; coef[<span class="hljs-number">4</span>], coef[<span class="hljs-number">3</span>], coef[<span class="hljs-number">5</span>], coef[<span class="hljs-number">1</span>], coef[<span class="hljs-number">0</span>], coef[<span class="hljs-number">2</span>], coef[<span class="hljs-number">6</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">if</span> JVET_N0242_NON_LINEAR_ALF</span><br>          filterClipp = &#123; clip[<span class="hljs-number">4</span>], clip[<span class="hljs-number">3</span>], clip[<span class="hljs-number">5</span>], clip[<span class="hljs-number">1</span>], clip[<span class="hljs-number">0</span>], clip[<span class="hljs-number">2</span>], clip[<span class="hljs-number">6</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<span class="hljs-comment">//!&lt;不变换</span><br>          filterCoeff = &#123; coef[<span class="hljs-number">0</span>], coef[<span class="hljs-number">1</span>], coef[<span class="hljs-number">2</span>], coef[<span class="hljs-number">3</span>], coef[<span class="hljs-number">4</span>], coef[<span class="hljs-number">5</span>], coef[<span class="hljs-number">6</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">if</span> JVET_N0242_NON_LINEAR_ALF</span><br>          filterClipp = &#123; clip[<span class="hljs-number">0</span>], clip[<span class="hljs-number">1</span>], clip[<span class="hljs-number">2</span>], clip[<span class="hljs-number">3</span>], clip[<span class="hljs-number">4</span>], clip[<span class="hljs-number">5</span>], clip[<span class="hljs-number">6</span>] &#125;;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>        &#125;<br></code></pre></td></tr></table></figure>





<p>采用的几何变换方式由上面计算的四个方向的梯度决定：<img src="https://i-blog.csdnimg.cn/direct/169d2ef3cacc4e0fad8ae287c67ed51f.png" alt="在这里插入图片描述"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs c++">   <span class="hljs-type">int</span> hv1, hv0, d1, d0, hvd1, hvd0;<br>​<br>      <span class="hljs-keyword">if</span>( sumV &gt; sumH )<br>      &#123;<br>        hv1 = sumV;<br>        hv0 = sumH;<br>        dirTempHV = <span class="hljs-number">1</span>;<br>      &#125;<br>      <span class="hljs-keyword">else</span><br>      &#123;<br>        hv1 = sumH;<br>        hv0 = sumV;<br>        dirTempHV = <span class="hljs-number">3</span>;<br>      &#125;<br>      <span class="hljs-keyword">if</span>( sumD0 &gt; sumD1 )<br>      &#123;<br>        d1 = sumD0;<br>        d0 = sumD1;<br>        dirTempD = <span class="hljs-number">0</span>;<br>      &#125;<br>      <span class="hljs-keyword">else</span><br>      &#123;<br>        d1 = sumD1;<br>        d0 = sumD0;<br>        dirTempD = <span class="hljs-number">2</span>;<br>      &#125;<br>      <span class="hljs-keyword">if</span>( d1*hv0 &gt; hv1*d0 )<br>      &#123;<br>        hvd1 = d1;<br>        hvd0 = d0;<br>        mainDirection = dirTempD;<br>        secondaryDirection = dirTempHV;<br>      &#125;<br>      <span class="hljs-keyword">else</span><br>      &#123;<br>        hvd1 = hv1;<br>        hvd0 = hv0;<br>        mainDirection = dirTempHV;<br>        secondaryDirection = dirTempD;<br>      &#125;<br>​<br>      <span class="hljs-type">int</span> directionStrength = <span class="hljs-number">0</span>;<br>      <span class="hljs-keyword">if</span>( hvd1 &gt; <span class="hljs-number">2</span> * hvd0 )<br>      &#123;<br>        directionStrength = <span class="hljs-number">1</span>;<br>      &#125;<br>      <span class="hljs-keyword">if</span>( hvd1 * <span class="hljs-number">2</span> &gt; <span class="hljs-number">9</span> * hvd0 )<br>      &#123;<br>        directionStrength = <span class="hljs-number">2</span>;<br>      &#125;<br>​<br>      <span class="hljs-keyword">if</span>( directionStrength )<br>      &#123;<br>        classIdx += ( ( ( mainDirection &amp; <span class="hljs-number">0x1</span> ) &lt;&lt; <span class="hljs-number">1</span> ) + directionStrength ) * <span class="hljs-number">5</span>;<br>      &#125;<br>      <span class="hljs-comment">//!&lt;几何变换索引计算</span><br>      <span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">int</span> transposeTable[<span class="hljs-number">8</span>] = &#123; <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span> &#125;;<br>      <span class="hljs-type">int</span> transposeIdx = transposeTable[mainDirection * <span class="hljs-number">2</span> + ( secondaryDirection &gt;&gt; <span class="hljs-number">1</span> )];<br></code></pre></td></tr></table></figure>



<h3 id="5-滤波器参数传输"><a href="#5-滤波器参数传输" class="headerlink" title="5. 滤波器参数传输"></a>5. 滤波器参数传输</h3><p>在VTM5中，ALF滤波器参数在Adaptation Parameter Set (APS)中。<br>在一个APS中，有至多25组亮度滤波器参数和门限值，及至多1组色度滤波器参数和门限值。为了减少比特开销，不同类别的滤波器参数可以merge合并。当前slice使用的APS索引在slice header中。</p>
<p>APS中可以解码出门限值索引，通过门限值索引可以从亮度门限值列表和色度门限值列表中指定所需的门限值。门限值列表由位深决定：<br><img src="https://i-blog.csdnimg.cn/direct/d17b24784acc4ae8bcad0fc6a8099114.png" alt="在这里插入图片描述"><br>滤波过程可以在CTU级进行控制，可以传输一个标志位表示是否需要对一个亮度CTU进行ALF滤波。一个亮度CTU使用的滤波器可以从16个固定滤波器和APS提供的滤波器中选择。有一个滤波器索引表示最终使用的滤波器。16个固定滤波器是预定义好的，硬编码进编码器和解码器了。</p>
<p>滤波器参数被量化成均值为128。为了减少乘法的复杂性，需要对码流进行一致性处理以使非中心位置的参数在[-128,127]间。中心位置的参数不需要传输，默认等于128。</p>
<h3 id="6-滤波操作"><a href="#6-滤波操作" class="headerlink" title="6. 滤波操作"></a>6. 滤波操作</h3><p><img src="https://i-blog.csdnimg.cn/direct/52a16c0b82b94d4a960edd71af647a1b.png" alt="在这里插入图片描述"></p>

      </div>
    </div>
    
      <script src='https://unpkg.com/mermaid@latest/dist/mermaid.min.js'></script>
      <script>
        if (window.mermaid) {
          mermaid.initialize(null);
        }
      </script>
    
  </article>
  <div class="post__foot">
    
      <div class="like-author">
  <input type="checkbox" id="likeCode" />
  <div class="author-face">
    <img height="100px"
         width="100px"
         id="front-face"
         alt="author face"
         src="/images/author-face.jpg" />
    <img height="100px"
         width="100px"
         id="back-face"
         alt="like code"
         src="/images/pay-code.jpg" />
  </div>
  <div class="like-text">“给作者倒杯卡布奇诺”</div>
  <label for="likeCode" class="like-btn">
    <svg viewBox="0 0 1024 1024"
         width="20px"
         style="margin-right: 10px"
         height="20px">
      <path d="M466.88 908.96L113.824 563.296a270.08 270.08 0 0 1 0-387.392c108.8-106.56 284.896-106.56 393.696 0 1.504 1.472 2.976 2.944 4.448 4.48 1.472-1.536 2.944-3.008 4.448-4.48 108.8-106.56 284.896-106.56 393.696 0a269.952 269.952 0 0 1 34.016 347.072l-387.392 385.6a64 64 0 0 1-89.92 0.384z" p-id="13650" fill="#ee4242" />
    </svg>
    喜欢作者
  </label>
</div>

    
    <div class="post-nav">
  
    <a class="post-nav-item-left" href="/2024/08/14/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90H-266-%E7%86%B5%E7%BC%96%E7%A0%81CABAC/">
      <div class="text-align">
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596" />
        </svg>
        <span class="text-small">上一篇</span>
      </div>
      <div>深度解析H.266/VVC 熵编码CABAC</div>
    </a>
  
  <div class="vhr"></div>
  
    <a class="post-nav-item-right" href="/2024/07/21/%E7%AB%99%E5%9C%A8%E5%91%BD%E8%BF%90%E7%9A%84%E5%8D%81%E5%AD%97%E8%B7%AF%E5%8F%A3/">
      <div class="text-align">
        <span class="text-small">下一篇</span>
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             transform="scale(-1,-1)"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596" />
        </svg>
      </div>
      站在命运的十字路口
    </a>
  
</div>

    
      <div class="related-post">
  <div class="related__head">
  <a href="/tags/vvc/" class="post-tag">#vvc</a>

</div>
  <div class="realated__body">
    
      <div class="null"><div class="null-item"><div class="null-title"><a href="\2024\07\21\深度解析H-266-帧间编码\" title="深度解析H.266/VVC帧间编码" rel="bookmark">深度解析H.266/VVC帧间编码</a></div></div><div class="null-item"><div class="null-title"><a href="\2024\07\20\深度解析H-266-帧内编码\" title="深度解析H.266/VVC帧内编码" rel="bookmark">深度解析H.266/VVC帧内编码</a></div></div><div class="null-item"><div class="null-title"><a href="\2024\08\14\深度解析H-266-熵编码CABAC\" title="深度解析H.266/VVC 熵编码CABAC" rel="bookmark">深度解析H.266/VVC 熵编码CABAC</a></div></div><div class="null-item"><div class="null-title"><a href="\2025\10\27\论文解读1-VcLLM：视频编解码器实际上是张量编解码器\" title="论文解读1-VcLLM：视频编解码器实际上是张量编解码器" rel="bookmark">论文解读1-VcLLM：视频编解码器实际上是张量编解码器</a></div></div></div>
    
  </div>
</div>

    
    
  </div>

    </div>
    <div class="foot">
      <div class="foot-inner">
        <div class="foot__head">
          
            <div class="foot-line">
              <div class="matts">书</div><div class="matts">到</div><div class="matts">用</div><div class="matts">时</div><div class="matts">方</div><div class="matts">恨</div><div class="matts">少</div>
            </div>
          
            <div class="foot-line">
              <div class="matts">事</div><div class="matts">非</div><div class="matts">经</div><div class="matts">过</div><div class="matts">不</div><div class="matts">知</div><div class="matts">难</div>
            </div>
          
        </div>
        <div class="foot__body">
          
            <div class="foot-item">
              <div class="foot-item__head">朋友</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/icon/icon-link.svg" />
                    <a class="foot-link" href="https://seusunz.github.io/">九天之遥</a>
                  </div>
                
                <div class="text">
                  <img alt="link" height="20px" width="20px" src="/images/icon/icon-link+.svg" />
                  <a class="foot-link"
                     href="mailto:1217249582@qq.com?subject=%E7%94%B3%E8%AF%B7%20Hozen.site%20%E7%9A%84%E5%8F%8B%E9%93%BE%E4%BD%8D%E7%BD%AE">
                  申请友链</a>
                </div>
              </div>
            </div>
          
          
            <div class="foot-item">
              <div class="foot-item__head">账号</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/logo-github.svg" />
                    <a class="foot-link" target="_blank" rel="noopener" href="https://github.com/seusunz">github</a>
                  </div>
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/logo-zh.svg" />
                    <a class="foot-link" target="_blank" rel="noopener" href="https://www.zhihu.com/people/seusun">知乎</a>
                  </div>
                
              </div>
            </div>
          
          <div class="foot-item">
            <div class="foot-item__head">联系</div>
            <div class="foot-item__body">
              <div class="text">
                <img alt="link" height="20px" width="20px" src="/images/icon/icon-email.svg" />
                <a class="foot-link" href="mailto:1217249582@qq.com">1217249582@qq.com</a>
              </div>
            </div>
          </div>
        </div>
        <div class="copyright">
          <a href="https://seusunz.github.io">九天之遥</a> &nbsp;|&nbsp;由&nbsp;<a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>&nbsp;及&nbsp;
          <svg width="20" height="20" viewBox="0 0 725 725">
            <path fill-rule="evenodd" fill="rgb(221, 221, 221)" d="M145.870,236.632 L396.955,103.578 L431.292,419.44 L156.600,522.53 L145.870,236.632 Z" />
            <path fill-rule="evenodd" fill="rgb(159, 159, 159)" d="M396.955,103.578 L564.345,234.486 L611.558,513.469 L431.292,419.44 L396.955,103.578 Z" />
            <path fill-rule="evenodd" fill="rgb(0, 0, 0)" d="M431.292,419.44 L611.558,513.469 L358.327,595.18 L156.600,522.53 L431.292,419.44 Z" />
          </svg>
          <a target="_blank" rel="noopener" href="https://github.com/hooozen/hexo-theme-tranquility">致远</a>&nbsp;驱动
        </div>
      </div>
    </div>
    
      <script src="https://unpkg.com/js-polyfills@0.1.43/es6.js"></script>
      <script id="MathJax-script"
              async
              src="https://www.unpkg.com/mathjax@3.2.2/es5/tex-mml-chtml.js"></script>
    
    
      <script src="/js/search.js"></script>
      <script>searchInitialize("/search.json")</script>
    
    
  

  </body>
</html>
